# クイックオーダー複数行入力機能 - 計画レビュー結果

## ✅ 問題なし

### 技術的実現性
- useProductSearch フックは既に存在し、デバウンス処理済み（300ms）
- ProductCodeInput は Tailwind CSS化済み
- Atomic Design 原則に準拠した設計
- TDD アプローチで実装

### アーキテクチャ
- コンポーネント分割が適切
- データ構造が明確
- テストケースが網羅的

## ⚠️ 修正・追加事項

### 1. NumberInput コンポーネントの Tailwind CSS化が必要
**問題**: NumberInput は styled-jsx を使用中（開発ルール違反）
**対応**: Phase 0 として NumberInput の Tailwind CSS化を追加

### 2. パフォーマンス懸念の明確化
**問題**: 99行のリアルタイム検索でAPI呼び出しが多くなる可能性
**対応**:
- 空の商品コードではAPI呼び出しされない（useProductSearch仕様）
- デバウンス処理で連続呼び出しを防止
- 実際の負荷は入力済み行のみ

## 🤔 ユーザー確認が必要な事項

### 1. 初期表示行数: 20行は適切か？
**懸念**:
- 20行表示すると画面が縦に長くなりスクロールが必要
- 空の入力欄が20個並ぶと視覚的に圧迫感
- 典型的な使用ケース: 一度に10-20商品程度と推測

**提案**:
- **案A（現行）**: 初期20行表示
- **案B（推奨）**: 初期5-10行 → 10件ずつ追加
  - メリット: 画面がすっきり、必要に応じて拡張
  - デメリット: 20商品以上入力する場合、複数回追加ボタンを押す必要

**質問**:
- 通常、一度に何商品程度入力するユースケースを想定していますか？
- 初期表示行数を減らす（5-10行）ことは可能ですか？

### 2. 最大行数: 99行は必要か？
**懸念**:
- 99行は過剰な可能性
- パフォーマンスとUXのバランス

**提案**:
- 最大50行程度で十分では？
- 大量発注の場合はCSVインポート機能の方が適切かも

**質問**:
- 99行という数字の根拠は？
- 最大行数を50行程度に制限することは可能ですか？

### 3. 商品プレビュー表示: 全行表示 vs コンパクト表示
**懸念**:
- 20行全てに商品プレビュー（画像+詳細）を表示すると情報過多
- 画面が非常に長くなる

**提案**:
- **案A（計画案）**: 各行に商品プレビュー表示
  - メリット: 視覚的に商品確認しやすい
  - デメリット: 画面が長い、情報過多

- **案B（コンパクト）**: 商品名のみインライン表示
  ```
  | No | 商品コード    | 数量 | 商品名              | 価格    |
  | 1  | [ABC123]     | [1]  | テスト商品A        | ¥1,000 |
  ```
  - メリット: コンパクト、一覧性が高い
  - デメリット: 画像が見えない

- **案C（折衷案）**: ホバー or クリックで詳細プレビュー
  - 通常時: 商品名と価格のみ
  - ホバー/クリック: モーダルやツールチップで詳細表示

**質問**:
- 商品プレビューはどの程度詳細に表示する必要がありますか？
- 画像表示は必須ですか？

## 📊 推奨事項

### 優先度高: ユーザー確認必須
1. **初期表示行数の決定**
   - 現行: 20行
   - 推奨: 5-10行（UX改善のため）

2. **商品プレビュー表示方法の決定**
   - 現行: 全行に詳細プレビュー
   - 推奨: コンパクト表示 or ホバー表示

### 優先度中: 検討推奨
3. **最大行数の見直し**
   - 現行: 99行
   - 推奨: 50行（パフォーマンスとUXのバランス）

## 🚀 実装開始の条件

以下が確定してから実装を開始することを推奨:
- [ ] 初期表示行数の確定（20行 or 5-10行）
- [ ] 商品プレビュー表示方法の確定
- [ ] 最大行数の確定（99行 or 50行）

## 📝 次のアクション

ユーザーに以下を確認:
1. 通常の使用シナリオ（一度に何商品入力するか）
2. 初期表示行数の希望
3. 商品プレビュー表示の希望レベル
4. 最大行数の妥当性

確認後、計画を最終調整して実装開始。
